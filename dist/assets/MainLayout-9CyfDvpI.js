import{s as h,r as N,c as B,a as i,o as l,w as t,u as D,b as y,d as e,Q as c,e as s,f as d,t as _,g as p,h as x,i as $,j as v,F as A,k as I,l as z,m as F}from"./index-CdXKqIwE.js";import{Q as H,a as R,b as j,c as E,d as O,e as P,f as U}from"./QLayout-BlAsAd6p.js";import{u as G,Q as J}from"./use-quasar-BVv1AXdb.js";import{Q as C,a as g,b as r,c as n}from"./QList-Blu0AZWi.js";import{u as K}from"./session-store-D5-E9gTF.js";const W={class:"q-pa-md"},X={class:"q-mb-md"},Y={key:0,class:"text-center text-grey-6 q-pa-md"},ne={__name:"MainLayout",setup(Z){const M=D(),u=G(),b=K(),{markers:Q,selectedMarker:q}=h(b),m=N(!1),w=B(()=>M.name==="creator");function V(){m.value=!m.value}function L(f){console.log("Selecting marker"),b.setSelectedMarker(f),console.log("Screen width:",u.screen.width),u.screen.lt.md&&(m.value=!1,console.log("Closing drawer"))}function S(f){const a=Math.floor(f/60),k=Math.floor(f%60);return`${a}:${k.toString().padStart(2,"0")}`}return(f,a)=>{const k=y("router-link"),T=y("router-view");return l(),i(H,{view:"lHh Lpr lFf"},{default:t(()=>[e(R,{elevated:""},{default:t(()=>[e(j,null,{default:t(()=>[e(c,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:V,class:"q-mr-sm"}),e(E,null,{default:t(()=>[e(k,{to:"/",class:"text-white",style:{"text-decoration":"none"}},{default:t(()=>[...a[2]||(a[2]=[s(" Video Markup ",-1)])]),_:1})]),_:1}),e(c,{flat:"",round:"",dense:"",icon:d(u).dark.isActive?"light_mode":"dark_mode",onClick:a[0]||(a[0]=o=>d(u).dark.toggle())},{default:t(()=>[e(J,null,{default:t(()=>[s("Toggle "+_(d(u).dark.isActive?"Light":"Dark")+" Mode",1)]),_:1})]),_:1},8,["icon"])]),_:1})]),_:1}),e(O,{modelValue:m.value,"onUpdate:modelValue":a[1]||(a[1]=o=>m.value=o),"show-if-above":"",bordered:"",width:w.value?320:256},{default:t(()=>[w.value?(l(),i(P,{key:0,class:"fit"},{default:t(()=>[p("div",W,[a[4]||(a[4]=p("div",{class:"text-h6 q-mb-sm"},"Markers",-1)),p("div",X,[e(c,{flat:"",dense:"",size:"sm",icon:"home",label:"Home",to:"/",class:"q-mr-xs"}),e(c,{flat:"",dense:"",size:"sm",icon:"video_library",label:"Sessions",to:"/sessions"})]),e($,{class:"q-mb-md"}),d(Q).length===0?(l(),x("div",Y,[e(v,{name:"bookmark_border",size:"48px"}),a[3]||(a[3]=p("div",{class:"q-mt-sm"},"No markers yet",-1))])):(l(),i(C,{key:1,separator:""},{default:t(()=>[(l(!0),x(A,null,I(d(Q),o=>(l(),i(g,{key:o.id,clickable:"",active:d(q)?.id===o.id,"active-class":"bg-primary text-white",onClick:ee=>L(o)},{default:t(()=>[e(r,{avatar:""},{default:t(()=>[e(z,{color:o.end_time?"orange":"blue","text-color":"white",icon:o.end_time?"timelapse":"bookmark"},null,8,["color","icon"])]),_:2},1024),e(r,null,{default:t(()=>[e(n,null,{default:t(()=>[s(_(S(o.start_time)),1)]),_:2},1024),o.end_time?(l(),i(n,{key:0,caption:""},{default:t(()=>[s(" to "+_(S(o.end_time)),1)]),_:2},1024)):F("",!0),e(n,{caption:"",class:"q-mt-xs"},{default:t(()=>[s(_(o.posts?.length||0)+" message(s) ",1)]),_:2},1024)]),_:2},1024),e(r,{side:""},{default:t(()=>[e(v,{name:"chevron_right"})]),_:1})]),_:2},1032,["active","onClick"]))),128))]),_:1}))])]),_:1})):(l(),i(C,{key:1},{default:t(()=>[e(n,{header:""},{default:t(()=>[...a[5]||(a[5]=[s("Navigation",-1)])]),_:1}),e(g,{clickable:"",to:"/",exact:""},{default:t(()=>[e(r,{avatar:""},{default:t(()=>[e(v,{name:"add_circle"})]),_:1}),e(r,null,{default:t(()=>[e(n,null,{default:t(()=>[...a[6]||(a[6]=[s("Create Session",-1)])]),_:1}),e(n,{caption:""},{default:t(()=>[...a[7]||(a[7]=[s("Start a new annotation session",-1)])]),_:1})]),_:1})]),_:1}),e(g,{clickable:"",to:"/sessions"},{default:t(()=>[e(r,{avatar:""},{default:t(()=>[e(v,{name:"video_library"})]),_:1}),e(r,null,{default:t(()=>[e(n,null,{default:t(()=>[...a[8]||(a[8]=[s("My Sessions",-1)])]),_:1}),e(n,{caption:""},{default:t(()=>[...a[9]||(a[9]=[s("View all annotation sessions",-1)])]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1},8,["modelValue","width"]),e(U,null,{default:t(()=>[e(T)]),_:1})]),_:1})}}};export{ne as default};
