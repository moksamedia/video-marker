import{n as Pt,p as Gt,q as Zt,v as Et,c as nt,x as Ot,y as Bt,r as Z,z as Jt,A as tu,B as uu,C as eu,D as zt,E as nu,G as au,H as du,I as su,J as lu,a as tt,o as X,w as A,K as ou,g as N,m as it,d as x,L as rt,h as Ct,F as fu,e as E,t as yt,j as K,M as lt,N as ct,Q as pt,i as iu}from"./index-CdXKqIwE.js";import{Q as ru}from"./QImg-CWgofFTW.js";import{_ as cu,Q as pu,a as At,b as hu}from"./_plugin-vue_export-helper-BlM1Smyy.js";import{u as gu,Q as qt}from"./use-quasar-BVv1AXdb.js";import"./axios-CpKrHKbl.js";const bu=["text","rect","circle","QBtn","QBadge","QChip","QToolbar","QCheckbox","QRadio","QToggle","QSlider","QRange","QInput","QAvatar"],mu=["wave","pulse","pulse-x","pulse-y","fade","blink","none"],Tt=Pt({name:"QSkeleton",props:{...Gt,tag:{type:String,default:"div"},type:{type:String,validator:u=>bu.includes(u),default:"rect"},animation:{type:String,validator:u=>mu.includes(u),default:"wave"},animationSpeed:{type:[String,Number],default:1500},square:Boolean,bordered:Boolean,size:String,width:String,height:String},setup(u,{slots:e}){const d=Et(),o=Zt(u,d.proxy.$q),s=nt(()=>{const f=u.size!==void 0?[u.size,u.size]:[u.width,u.height];return{"--q-skeleton-speed":`${u.animationSpeed}ms`,width:f[0],height:f[1]}}),n=nt(()=>`q-skeleton q-skeleton--${o.value===!0?"dark":"light"} q-skeleton--type-${u.type}`+(u.animation!=="none"?` q-skeleton--anim q-skeleton--anim-${u.animation}`:"")+(u.square===!0?" q-skeleton--square":"")+(u.bordered===!0?" q-skeleton--bordered":""));return()=>Ot(u.tag,{class:n.value,style:s.value},Bt(e.default))}}),wu=Pt({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(u,{slots:e,emit:d}){const o=Et(),s=Z(null);let n=0;const f=[];function a(g){const T=typeof g=="boolean"?g:u.noErrorFocus!==!0,C=++n,F=(c,k)=>{d(`validation${c===!0?"Success":"Error"}`,k)},M=c=>{const k=c.validate();return typeof k.then=="function"?k.then(R=>({valid:R,comp:c}),R=>({valid:!1,comp:c,err:R})):Promise.resolve({valid:k,comp:c})};return(u.greedy===!0?Promise.all(f.map(M)).then(c=>c.filter(k=>k.valid!==!0)):f.reduce((c,k)=>c.then(()=>M(k).then(R=>{if(R.valid===!1)return Promise.reject(R)})),Promise.resolve()).catch(c=>[c])).then(c=>{if(c===void 0||c.length===0)return C===n&&F(!0),!0;if(C===n){const{comp:k,err:R}=c[0];if(R!==void 0&&console.error(R),F(!1,k),T===!0){const st=c.find(({comp:ft})=>typeof ft.focus=="function"&&eu(ft.$)===!1);st!==void 0&&st.comp.focus()}}return!1})}function r(){n++,f.forEach(g=>{typeof g.resetValidation=="function"&&g.resetValidation()})}function i(g){g!==void 0&&zt(g);const T=n+1;a().then(C=>{T===n&&C===!0&&(u.onSubmit!==void 0?d("submit",g):g?.target!==void 0&&typeof g.target.submit=="function"&&g.target.submit())})}function m(g){g!==void 0&&zt(g),d("reset"),nu(()=>{r(),u.autofocus===!0&&u.noResetFocus!==!0&&v()})}function v(){au(()=>{if(s.value===null)return;(s.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||s.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||s.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(s.value.querySelectorAll("[tabindex]"),T=>T.tabIndex!==-1))?.focus({preventScroll:!0})})}du(su,{bindComponent(g){f.push(g)},unbindComponent(g){const T=f.indexOf(g);T!==-1&&f.splice(T,1)}});let _=!1;return Jt(()=>{_=!0}),tu(()=>{_===!0&&u.autofocus===!0&&v()}),uu(()=>{u.autofocus===!0&&v()}),Object.assign(o.proxy,{validate:a,resetValidation:r,submit:i,reset:m,focus:v,getValidationComponents:()=>f}),()=>Ot("form",{class:"q-form",ref:s,onSubmit:i,onReset:m},Bt(e.default))}});function I(){const u=[];return u.add=function(e){this.indexOf(e)<0&&this.push(e)},u.contains=function(e){return this.indexOf(e)>=0},u}function q(){const u={};return u.k=[],u.v=[],u.put=function(e,d){const o=this.k.indexOf(e);o<0?(this.k.push(e),this.v.push(d)):this.v[o]=d},u.containsKey=function(e){return this.k.indexOf(e)>=0},u.get=function(e){const d=this.k.indexOf(e);if(d>=0)return this.v[d]},u}let t;const p=new q;p.put("k","ཀ");p.put("kh","ཁ");p.put("g","ག");p.put("gh","གྷ");p.put("g+h","གྷ");p.put("ng","ང");p.put("c","ཅ");p.put("ch","ཆ");p.put("j","ཇ");p.put("ny","ཉ");p.put("T","ཊ");p.put("-t","ཊ");p.put("Th","ཋ");p.put("-th","ཋ");p.put("D","ཌ");p.put("-d","ཌ");p.put("Dh","ཌྷ");p.put("D+h","ཌྷ");p.put("-dh","ཌྷ");p.put("-d+h","ཌྷ");p.put("N","ཎ");p.put("-n","ཎ");p.put("t","ཏ");p.put("th","ཐ");p.put("d","ད");p.put("dh","དྷ");p.put("d+h","དྷ");p.put("n","ན");p.put("p","པ");p.put("ph","ཕ");p.put("b","བ");p.put("bh","བྷ");p.put("b+h","བྷ");p.put("m","མ");p.put("ts","ཙ");p.put("tsh","ཚ");p.put("dz","ཛ");p.put("dzh","ཛྷ");p.put("dz+h","ཛྷ");p.put("w","ཝ");p.put("zh","ཞ");p.put("z","ཟ");p.put("'","འ");p.put("y","ཡ");p.put("r","ར");p.put("l","ལ");p.put("sh","ཤ");p.put("Sh","ཥ");p.put("-sh","ཥ");p.put("s","ས");p.put("h","ཧ");p.put("W","ཝ");p.put("Y","ཡ");p.put("R","ཪ");p.put("f","ཕ༹");p.put("v","བ༹");const h=new q;h.put("k","ྐ");h.put("kh","ྑ");h.put("g","ྒ");h.put("gh","ྒྷ");h.put("g+h","ྒྷ");h.put("ng","ྔ");h.put("c","ྕ");h.put("ch","ྖ");h.put("j","ྗ");h.put("ny","ྙ");h.put("T","ྚ");h.put("-t","ྚ");h.put("Th","ྛ");h.put("-th","ྛ");h.put("D","ྜ");h.put("-d","ྜ");h.put("Dh","ྜྷ");h.put("D+h","ྜྷ");h.put("-dh","ྜྷ");h.put("-d+h","ྜྷ");h.put("N","ྞ");h.put("-n","ྞ");h.put("t","ྟ");h.put("th","ྠ");h.put("d","ྡ");h.put("dh","ྡྷ");h.put("d+h","ྡྷ");h.put("n","ྣ");h.put("p","ྤ");h.put("ph","ྥ");h.put("b","ྦ");h.put("bh","ྦྷ");h.put("b+h","ྦྷ");h.put("m","ྨ");h.put("ts","ྩ");h.put("tsh","ྪ");h.put("dz","ྫ");h.put("dzh","ྫྷ");h.put("dz+h","ྫྷ");h.put("w","ྭ");h.put("zh","ྮ");h.put("z","ྯ");h.put("'","ྰ");h.put("y","ྱ");h.put("r","ྲ");h.put("l","ླ");h.put("sh","ྴ");h.put("Sh","ྵ");h.put("-sh","ྵ");h.put("s","ྶ");h.put("h","ྷ");h.put("a","ྸ");h.put("W","ྺ");h.put("Y","ྻ");h.put("R","ྼ");const $=new q;$.put("a","ཨ");$.put("A","ཱ");$.put("i","ི");$.put("I","ཱི");$.put("u","ུ");$.put("U","ཱུ");$.put("e","ེ");$.put("ai","ཻ");$.put("o","ོ");$.put("au","ཽ");$.put("-i","ྀ");$.put("-I","ཱྀ");const O=new q;O.put("M","ཾ");O.put("~M`","ྂ");O.put("~M","ྃ");O.put("X","༷");O.put("~X","༵");O.put("H","ཿ");O.put("?","྄");O.put("^","༹");O.put("&","྅");const B=new q;B.put("M","M");B.put("~M`","M");B.put("~M","M");B.put("X","X");B.put("~X","X");B.put("H","H");B.put("?","?");B.put("^","^");B.put("&","&");const S=new q;S.put("0","༠");S.put("1","༡");S.put("2","༢");S.put("3","༣");S.put("4","༤");S.put("5","༥");S.put("6","༦");S.put("7","༧");S.put("8","༨");S.put("9","༩");S.put(" ","་");S.put("*","༌");S.put("/","།");S.put("//","༎");S.put(";","༏");S.put("|","༑");S.put("!","༈");S.put(":","༔");S.put("_"," ");S.put("=","༴");S.put("<","༺");S.put(">","༻");S.put("(","༼");S.put(")","༽");S.put("@","༄");S.put("#","༅");S.put("$","༆");S.put("%","༇");const Y=new I;Y.add(".");Y.add("+");Y.add("-");Y.add("~");Y.add("^");Y.add("?");Y.add("`");Y.add("]");const ot=new q;t=new I;t.add("k");t.add("g");t.add("ng");t.add("j");t.add("ny");t.add("t");t.add("d");t.add("n");t.add("b");t.add("m");t.add("ts");t.add("dz");t.add("k+y");t.add("g+y");t.add("m+y");t.add("b+w");t.add("ts+w");t.add("g+w");ot.put("r",t);t=new I;t.add("k");t.add("g");t.add("ng");t.add("c");t.add("j");t.add("t");t.add("d");t.add("p");t.add("b");t.add("h");ot.put("l",t);t=new I;t.add("k");t.add("g");t.add("ng");t.add("ny");t.add("t");t.add("d");t.add("n");t.add("p");t.add("b");t.add("m");t.add("ts");t.add("k+y");t.add("g+y");t.add("p+y");t.add("b+y");t.add("m+y");t.add("k+r");t.add("g+r");t.add("p+r");t.add("b+r");t.add("m+r");t.add("n+r");ot.put("s",t);const dt=new q;t=new I;t.add("k");t.add("kh");t.add("g");t.add("p");t.add("ph");t.add("b");t.add("m");t.add("r+k");t.add("r+g");t.add("r+m");t.add("s+k");t.add("s+g");t.add("s+p");t.add("s+b");t.add("s+m");dt.put("y",t);t=new I;t.add("k");t.add("kh");t.add("g");t.add("t");t.add("th");t.add("d");t.add("n");t.add("p");t.add("ph");t.add("b");t.add("m");t.add("sh");t.add("s");t.add("h");t.add("dz");t.add("s+k");t.add("s+g");t.add("s+p");t.add("s+b");t.add("s+m");t.add("s+n");dt.put("r",t);t=new I;t.add("k");t.add("g");t.add("b");t.add("r");t.add("s");t.add("z");dt.put("l",t);t=new I;t.add("k");t.add("kh");t.add("g");t.add("c");t.add("ny");t.add("t");t.add("d");t.add("ts");t.add("tsh");t.add("zh");t.add("z");t.add("r");t.add("l");t.add("sh");t.add("s");t.add("h");t.add("g+r");t.add("d+r");t.add("ph+y");t.add("r+g");t.add("r+ts");dt.put("w",t);const G=new q;t=new I;t.add("c");t.add("ny");t.add("t");t.add("d");t.add("n");t.add("ts");t.add("zh");t.add("z");t.add("y");t.add("sh");t.add("s");G.put("g",t);t=new I;t.add("k");t.add("g");t.add("ng");t.add("p");t.add("b");t.add("m");t.add("k+y");t.add("g+y");t.add("p+y");t.add("b+y");t.add("m+y");t.add("k+r");t.add("g+r");t.add("p+r");t.add("b+r");G.put("d",t);t=new I;t.add("k");t.add("g");t.add("c");t.add("t");t.add("d");t.add("ts");t.add("zh");t.add("z");t.add("sh");t.add("s");t.add("r");t.add("l");t.add("k+y");t.add("g+y");t.add("k+r");t.add("g+r");t.add("r+l");t.add("s+l");t.add("r+k");t.add("r+g");t.add("r+ng");t.add("r+j");t.add("r+ny");t.add("r+t");t.add("r+d");t.add("r+n");t.add("r+ts");t.add("r+dz");t.add("s+k");t.add("s+g");t.add("s+ng");t.add("s+ny");t.add("s+t");t.add("s+d");t.add("s+n");t.add("s+ts");t.add("r+k+y");t.add("r+g+y");t.add("s+k+y");t.add("s+g+y");t.add("s+k+r");t.add("s+g+r");t.add("l+d");t.add("l+t");t.add("k+l");t.add("s+r");t.add("z+l");t.add("s+w");G.put("b",t);t=new I;t.add("kh");t.add("g");t.add("ng");t.add("ch");t.add("j");t.add("ny");t.add("th");t.add("d");t.add("n");t.add("tsh");t.add("dz");t.add("kh+y");t.add("g+y");t.add("kh+r");t.add("g+r");G.put("m",t);t=new I;t.add("kh");t.add("g");t.add("ch");t.add("j");t.add("th");t.add("d");t.add("ph");t.add("b");t.add("tsh");t.add("dz");t.add("kh+y");t.add("g+y");t.add("ph+y");t.add("b+y");t.add("kh+r");t.add("g+r");t.add("d+r");t.add("ph+r");t.add("b+r");G.put("'",t);G.put("‘",t);G.put("’",t);const Q=new I;Q.add("'");Q.add("‘");Q.add("’");Q.add("g");Q.add("ng");Q.add("d");Q.add("n");Q.add("b");Q.add("m");Q.add("r");Q.add("l");Q.add("s");Q.add("N");Q.add("T");Q.add("-n");Q.add("-t");const mt=new q;t=new I;t.add("g");t.add("ng");t.add("b");t.add("m");mt.put("s",t);t=new I;t.add("n");t.add("r");t.add("l");mt.put("d",t);const L=new q;L.put("dgs",1);L.put("dms",1);L.put("dngs",1);L.put("'gs",1);L.put("'bs",1);L.put("mngs",0);L.put("mgs",0);L.put("bgs",0);L.put("dbs",1);const V=new q;V.put("dgs","dgas");V.put("dngs","dngas");V.put("dms","dmas");V.put("'gs","'gas");V.put("'bs","'bas");V.put("mngs","mangs");V.put("mgs","mags");V.put("bgs","bags");V.put("dbs","dbas");const w=new q;w.put("ཀ","k");w.put("ཁ","kh");w.put("ག","g");w.put("གྷ","g+h");w.put("ང","ng");w.put("ཅ","c");w.put("ཆ","ch");w.put("ཇ","j");w.put("ཉ","ny");w.put("ཊ","T");w.put("ཋ","Th");w.put("ཌ","D");w.put("ཌྷ","D+h");w.put("ཎ","N");w.put("ཏ","t");w.put("ཐ","th");w.put("ད","d");w.put("དྷ","d+h");w.put("ན","n");w.put("པ","p");w.put("ཕ","ph");w.put("བ","b");w.put("བྷ","b+h");w.put("མ","m");w.put("ཙ","ts");w.put("ཚ","tsh");w.put("ཛ","dz");w.put("ཛྷ","dz+h");w.put("ཝ","w");w.put("ཞ","zh");w.put("ཟ","z");w.put("འ","'");w.put("ཡ","y");w.put("ར","r");w.put("ལ","l");w.put("ཤ","sh");w.put("ཥ","Sh");w.put("ས","s");w.put("ཧ","h");w.put("ཨ","a");w.put("ཀྵ","k+Sh");w.put("ཪ","R");const b=new q;b.put("ྐ","k");b.put("ྑ","kh");b.put("ྒ","g");b.put("ྒྷ","g+h");b.put("ྔ","ng");b.put("ྕ","c");b.put("ྖ","ch");b.put("ྗ","j");b.put("ྙ","ny");b.put("ྚ","T");b.put("ྛ","Th");b.put("ྜ","D");b.put("ྜྷ","D+h");b.put("ྞ","N");b.put("ྟ","t");b.put("ྠ","th");b.put("ྡ","d");b.put("ྡྷ","d+h");b.put("ྣ","n");b.put("ྤ","p");b.put("ྥ","ph");b.put("ྦ","b");b.put("ྦྷ","b+h");b.put("ྨ","m");b.put("ྩ","ts");b.put("ྪ","tsh");b.put("ྫ","dz");b.put("ྫྷ","dz+h");b.put("ྭ","w");b.put("ྮ","zh");b.put("ྯ","z");b.put("ྰ","'");b.put("ྱ","y");b.put("ྲ","r");b.put("ླ","l");b.put("ྴ","sh");b.put("ྵ","Sh");b.put("ྶ","s");b.put("ྷ","h");b.put("ྸ","a");b.put("ྐྵ","k+Sh");b.put("ྺ","W");b.put("ྻ","Y");b.put("ྼ","R");const P=new q;P.put("ཱ","A");P.put("ི","i");P.put("ཱི","I");P.put("ུ","u");P.put("ཱུ","U");P.put("ེ","e");P.put("ཻ","ai");P.put("ོ","o");P.put("ཽ","au");P.put("ྀ","-i");const wt=new q;wt.put("i","I");wt.put("u","U");wt.put("-i","-I");const W=new q;W.put("ཾ","M");W.put("ྂ","~M`");W.put("ྃ","~M");W.put("༷","X");W.put("༵","~X");W.put("༹","^");W.put("ཿ","H");W.put("྄","?");W.put("྅","&");const H=new q;H.put("ཾ","M");H.put("ྂ","M");H.put("ྃ","M");H.put("༷","X");H.put("༵","X");H.put("༹","^");H.put("ཿ","H");H.put("྄","?");H.put("྅","&");const St=new q;St.put("ph","f");St.put("b","v");const z=new q;z.put(" ","_");z.put("༄","@");z.put("༅","#");z.put("༆","$");z.put("༇","%");z.put("༈","!");z.put("་"," ");z.put("༌","*");z.put("།","/");z.put("༎","//");z.put("༏",";");z.put("༑","|");z.put("༔",":");z.put("༠","0");z.put("༡","1");z.put("༢","2");z.put("༣","3");z.put("༤","4");z.put("༥","5");z.put("༦","6");z.put("༧","7");z.put("༨","8");z.put("༩","9");z.put("༴","=");z.put("༺","<");z.put("༻",">");z.put("༼","(");z.put("༽",")");const l=new I;l.add("b+l");l.add("b+r");l.add("b+y");l.add("c+w");l.add("d+r");l.add("d+r+w");l.add("d+w");l.add("dz+r");l.add("g+l");l.add("g+r");l.add("g+r+w");l.add("g+w");l.add("g+y");l.add("h+r");l.add("h+w");l.add("k+l");l.add("k+r");l.add("k+w");l.add("k+y");l.add("kh+r");l.add("kh+w");l.add("kh+y");l.add("l+b");l.add("l+c");l.add("l+d");l.add("l+g");l.add("l+h");l.add("l+j");l.add("l+k");l.add("l+ng");l.add("l+p");l.add("l+t");l.add("l+w");l.add("m+r");l.add("m+y");l.add("n+r");l.add("ny+w");l.add("p+r");l.add("p+y");l.add("ph+r");l.add("ph+y");l.add("ph+y+w");l.add("r+b");l.add("r+d");l.add("r+dz");l.add("r+g");l.add("r+g+w");l.add("r+g+y");l.add("r+j");l.add("r+k");l.add("r+k+y");l.add("r+l");l.add("r+m");l.add("r+m+y");l.add("r+n");l.add("r+ng");l.add("r+ny");l.add("r+t");l.add("r+ts");l.add("r+ts+w");l.add("r+w");l.add("s+b");l.add("s+b+r");l.add("s+b+y");l.add("s+d");l.add("s+g");l.add("s+g+r");l.add("s+g+y");l.add("s+k");l.add("s+k+r");l.add("s+k+y");l.add("s+l");l.add("s+m");l.add("s+m+r");l.add("s+m+y");l.add("s+n");l.add("s+n+r");l.add("s+ng");l.add("s+ny");l.add("s+p");l.add("s+p+r");l.add("s+p+y");l.add("s+r");l.add("s+t");l.add("s+ts");l.add("s+w");l.add("sh+r");l.add("sh+w");l.add("t+r");l.add("t+w");l.add("th+r");l.add("ts+w");l.add("tsh+w");l.add("z+l");l.add("z+w");l.add("zh+w");const U=new q;U.put("S",2);U.put("/",2);U.put("d",4);U.put("g",3);U.put("b",3);U.put("D",3);U.put("z",2);U.put("~",3);U.put("-",4);U.put("T",2);U.put("a",2);U.put("k",2);U.put("t",3);U.put("s",2);U.put("c",2);U.put("n",2);U.put("p",2);U.put("\r",2);const y=new I;y.add("-d+h");y.add("dz+h");y.add("-dh");y.add("-sh");y.add("-th");y.add("D+h");y.add("b+h");y.add("d+h");y.add("dzh");y.add("g+h");y.add("tsh");y.add("~M`");y.add("-I");y.add("-d");y.add("-i");y.add("-n");y.add("-t");y.add("//");y.add("Dh");y.add("Sh");y.add("Th");y.add("ai");y.add("au");y.add("bh");y.add("ch");y.add("dh");y.add("dz");y.add("gh");y.add("kh");y.add("ng");y.add("ny");y.add("ph");y.add("sh");y.add("th");y.add("ts");y.add("zh");y.add("~M");y.add("~X");y.add(`\r
`);const yu=function(){return this.uni_string="",this.tokens_used=0,this.single_consonant="",this.single_cons_a="",this.warns=[],this.visarga=!1,this};function Lt(u,e){const d=[];let o="";for(;u[e]!=null;)if(o=u[e++],!(o=="+"||o=="^")){if(J(o)==null)break;d.push(o)}return d.join("+")}function _u(u,e,d){const o=[];let s="";for(;e>=d&&u[e]!=null;)if(s=u[e--],!(s=="+"||s=="^")){if(J(s)==null)break;o.unshift(s)}return o.join("+")}const vu=function(){return this.uni_string="",this.tokens_used=0,this.warns=[],this},ku=function(){return this.top="",this.stack=[],this.caret=!1,this.vowels=[],this.finals=[],this.finals_found=q(),this.visarga=!1,this.cons_str="",this.single_cons="",this.prefix=!1,this.suffix=!1,this.suff2=!1,this.dot=!1,this.tokens_used=0,this.warns=[],this},xu=function(){return this.wylie="",this.tokens_used=0,this.warns=[],this},D={PREFIX:0,MAIN:1,SUFF1:2,SUFF2:3,NONE:4},Su=function(u){const e=[];let d=0;const o=u.length;t:for(;d<o;){const s=u.charAt(d),n=U.get(s);if(n!=null){for(let f=n;f>1;f--)if(d<=o-f){const a=u.substring(d,d+f);if(y.contains(a)){e.push(a),d+=f;continue t}}}if(s=="\\"&&d<=o-2){u.charAt(d+1)=="u"&&d<=o-6?(e.push(u.substring(d,d+6)),d+=6):u.charAt(d+1)=="U"&&d<=o-10?(e.push(u.substring(d,d+10)),d+=10):(e.push(u.substring(d,d+2)),d+=2);continue t}e.push(s.toString()),d+=1}return e};var J=function(u){return p.get(u)};const ht=function(u){return h.get(u)},ut=function(u){return $.get(u)},jt=function(u){return O.get(u)},_t=function(u){return B.get(u)},zu=function(u){return S.get(u)},Cu=function(u){return Y.contains(u)},Au=function(u){return ot.containsKey(u)},Ft=function(u,e){const d=ot.get(u);return d==null?!1:d.contains(e)},qu=function(u){return dt.containsKey(u)},Ut=function(u,e){const d=dt.get(u);return d==null?!1:d.contains(e)},vt=function(u){return G.containsKey(u)},kt=function(u,e){const d=G.get(u);return d==null?!1:d.contains(e)},gt=function(u){return Q.contains(u)},Tu=function(u){return mt.containsKey(u)},xt=function(u,e){const d=mt.get(u);return d==null?!1:d.contains(e)},Vt=function(u){return L.get(u)},ju=function(u){return V.get(u)},et=function(u){return w.get(u)},Wt=function(u){return b.get(u)},Ht=function(u){return P.get(u)},It=function(u){return wt.get(u)},Xt=function(u){return W.get(u)},Fu=function(u){return H.get(u)},Qt=function(u){return St.get(u)},bt=function(u){return z.get(u)},Kt=function(u){return l.contains(u)};function Uu(u){for(let e=0;e<u.length;e++){const d=u.charAt(e);if(!(d>="a"&&d<="f"||d>="0"&&d<="9"))return!1}return!0}function Rt(u,e,d){const o=d.substring(2);return o==""?null:Uu(o)?String.fromCharCode(parseInt(o,16)):(at(u,e,'"'+d+'": invalid hex code.'),"")}function Yt(u,e){u?.push(e)}function at(u,e,d){Yt(u,"line "+e+": "+d)}function Iu(u,e,d){const o=e;let s=u[e],n=null,f="",a=!1,r=!0;const i=[];let m=-1,v="",_=[],g=D.PREFIX;for(;s!=null&&(ut(s)!=null||J(s)!=null)&&!a;)if(n!=null&&(f=n.single_consonant),n=Qu(u,e,d),e+=n.tokens_used,s=u[e],v+=n.uni_string,_=_.concat(n.warns),a=n.visarga,!!d.check)if(g==D.PREFIX&&n.single_consonant!=null){if(i.push(n.single_consonant),vt(n.single_consonant)){let C=s;d.check_strict&&(C=Lt(u,e)),C!=null&&!kt(n.single_consonant,C)&&(C=C.replace(/\+/g,""),_.push('Prefix "'+n.single_consonant+'" does not occur before "'+C+'".'))}else _.push('Invalid prefix consonant: "'+n.single_consonant+'".');g=D.MAIN}else n.single_consonant==null?(g=D.SUFF1,m>=0?r=!1:n.single_cons_a!=null&&(i.push(n.single_cons_a),m=i.length-1)):g==D.MAIN?_.push('Expected vowel after "'+n.single_consonant+'".'):g==D.SUFF1?(i.push(n.single_consonant),d.check_strict&&(gt(n.single_consonant)||_.push('Invalid suffix consonant: "'+n.single_consonant+'".')),g=D.SUFF2):g==D.SUFF2?(i.push(n.single_consonant),Tu(n.single_consonant)?xt(n.single_consonant,f)||_.push('Second suffix "'+n.single_consonant+'" does not occur after "'+f+'".'):_.push('Invalid 2nd suffix consonant: "'+n.single_consonant+'".'),g=D.NONE):g==D.NONE&&_.push('Cannot have another consonant "'+n.single_consonant+'" after 2nd suffix.');if(g==D.MAIN&&n.single_consonant!=null&&vt(n.single_consonant)&&_.push('Vowel expected after "'+n.single_consonant+'".'),d.check&&_.length==0&&r&&m>=0){if(i.length==2&&m!=0&&kt(i[0],i[1])&&gt(i[1]))_.push('Syllable should probably be "'+i[0]+"a"+i[1]+'".');else if(i.length==3&&vt(i[0])&&xt("s",i[1])&&i[2]=="s"){const C=i.join(""),F=Vt(C);F!=null&&F!=m&&_.push('Syllable should probably be "'+ju(C)+'".')}}const T=new vu;return T.uni_string=v,T.tokens_used=e-o,T.warns=_,T}function Qu(u,e,d){const o=e;let s="",n="",f="";const a=[];let r=0,i=null,m=null,v=null,_=!1,g=0;const T=new q;if(s=u[e],n=u[e+1],n!=null&&Au(s)&&Ft(s,n)){if(d.check_strict){let F=Lt(u,e+1);Ft(s,F)||(F=F.replace(/\+/g,""),a.push('Superscript "'+s+'" does not occur above combination "'+F+'".'))}for(f+=J(s),r++,e++;u[e]!=null&&u[e]=="^";)g++,e++}t:for(;;){if(s=u[e],J(s)!=null||f.length>0&&ht(s)!=null){for(f.length>0?f+=ht(s):f+=J(s),e++,s=="a"?i="a":(r++,v=s);u[e]!=null&&u[e]=="^";)g++,e++;for(let F=0;F<2&&(n=u[e],n!=null&&qu(n));F++){if(n=="l"&&r>1)break;if(d.check_strict&&!_){let M=_u(u,e-1,o);Ut(n,M)||(M=M.replace(/\+/g,""),a.push('Subjoined "'+n+'" not expected after "'+M+'".'))}else d.check&&!Ut(n,s)&&!(F==1&&n=="w"&&s=="y")&&a.push('Subjoined "'+n+'"not expected after "'+s+'".');for(f+=ht(n),e++,r++;u[e]!=null&&u[e]=="^";)g++,e++;s=n}}if(g>0&&(g>1&&a.push('Cannot have more than one "^" applied to the same stack.'),T.put(_t("^"),"^"),f+=jt("^"),g=0),s=u[e],s!=null&&ut(s)!=null&&(f.length==0&&(f+=ut("a")),s!="a"&&(f+=ut(s)),e++,i=s,s!="a"&&(m=s)),s=u[e],s!=null&&s=="+"){if(e++,_=!0,s=u[e],s==null||ut(s)==null&&ht(s)==null){d.check&&a.push('Expected vowel or consonant after "+".');break t}d.check&&(ut(s)==null&&m!=null?a.push("Cannot subjoin consonant ("+s+") after vowel ("+m+") in same stack."):s=="a"&&m!=null&&a.push("Cannot subjoin a-chen (a) after vowel ("+m+") in same stack."));continue t}break t}for(s=u[e];s!=null&&_t(s)!=null;){const F=jt(s),M=_t(s);T.containsKey(M)?T.get(M)==s?a.push('Cannot have two "'+s+'" applied to the same stack.'):a.push('Cannot have "'+s+'" and "'+T.get(M)+'" applied to the same stack.'):(T.put(M,s),f+=F),e++,v=null,s=u[e]}u[e]!=null&&u[e]=="."&&e++,r>1&&i==null&&(_?d.check&&a.push("Stack with multiple consonants should end with vowel."):(e=o+1,r=1,v=u[o],f="",f+=J(v))),(r!=1||_)&&(v=null);const C=new yu;return C.uni_string=f,C.tokens_used=e-o,i!=null?C.single_consonant=null:C.single_consonant=v,i!=null&&i=="a"?C.single_cons_a=v:C.single_cons_a=null,C.warns=a,C.visarga=T.containsKey("H"),C}function Ru(u){return u=u.replace(/[ʼʹ‘’ʾ]/g,"'"),u=u.replace(/ ([\(0-9])/g,"_$1"),u=u.replace(/([_\)\/]) /g,"$1_"),u=u.replace(/G/g,"g"),u=u.replace(/C/g,"c"),u=u.replace(/B/g,"b"),u=u.replace(/L/g,"l"),u=u.replace(/P/g,"p"),u=u.replace(/Z/g,"z"),u=u.replace(/^\s+/,""),u}function Mt(u,e,d){d||(d=[]),e||(e={sloppy:!0}),e.sloppy&&(u=Ru(u));let o="",s=1,n=0,f=0;const a=Su(u);t:for(;a[f]!=null;){let r=a[f],i=null;if(r=="["){let v=1;f++;u:for(;a[f]!=null;){if(r=a[f++],r=="["&&v++,r=="]"&&v--,v==0)continue t;if(r.charAt(0)=="\\"&&(r.charAt(1)=="u"||r.charAt(1)=="U")&&(i=Rt(d,s,r),i!=null)){o+=i;continue u}r.charAt(0)=="\\"?i=r.substring(1):i=r,o+=i}at(d,s,"Unfinished [non-Wylie stuff].");break t}if(i=zu(r),i!=null){if(o+=i,f++,n++,r==" "&&e.sloppy)for(;a[f]!=null&&a[f]==" ";)f++;continue t}if(ut(r)!=null||J(r)!=null){const v=Iu(a,f,e);let _="";for(let g=0;g<v.tokens_used;g++)_+=a[f+g];o+=v.uni_string,f+=v.tokens_used,n++;for(let g=0;g<v.warns.length;g++)at(d,s,'"'+_+'": '+v.warns[g]);continue t}if(r=="\uFEFF"||r=="​"){f++;continue t}if(r.charAt(0)=="\\"&&(r.charAt(1)=="u"||r.charAt(1)=="U")&&(i=Rt(d,s,r),i!=null)){f++,o+=i;continue t}if(r.charAt(0)=="\\"){o+=r.substring(1),f++;continue t}if(r==`\r
`||r==`
`||r=="\r"){if(s++,o+=r,f++,e.sloppy)for(;a[f]!=null&&a[f]==" ";)f++;continue t}const m=r.charAt(0);(Cu(r)||m>="a"&&m<="z"||m>="A"&&m<="Z")&&at(d,s,'Unexpected character "'+r+'".'),o+=r,f++}return n==0&&Yt(d,"No Tibetan characters found!"),o}function Nt(u){let e="";e+="\\u";const d=u.charCodeAt(0).toString(16);for(let o=d.length;o<4;o++)e+="0";return e+=d,e}function $t(u,e,d){let o=0;for(;e<u.length&&u.charAt(e)==" ";)e++,o++;if(o==0||e==u.length)return 0;const s=u.charAt(e);if(et(s)==null&&bt(s)==null)return 0;for(e=0;e<o;e++)d+="_";return o}function Mu(u,e){const d=u.length;for(;e<d&&u.charAt(e)==" ";)e++;if(e==d)return!1;const o=u.charAt(e);return et(o)==null&&bt(o)==null&&o!="\r"&&o!=`
`}function Nu(u,e,d){const o=d;let s=[];const n=[];t:for(;;){const m=$u(u,e,d);if(n.push(m),s=s.concat(m.warns),d+=m.tokens_used,m.visarga||d>=e||et(u.charAt(d))==null)break t}const f=n.length-1;if(n.length>1&&n[0].single_cons!=null){const m=n[1].cons_str.replace(/\+w/g,"");kt(n[0].single_cons,m)&&(n[0].prefix=!0)}if(n.length>1&&n[f].single_cons!=null&&gt(n[f].single_cons)&&(n[f].suffix=!0),n.length>2&&n[f].single_cons!=null&&n[f-1].single_cons!=null&&gt(n[f-1].single_cons)&&xt(n[f].single_cons,n[f-1].single_cons)&&(n[f].suff2=!0,n[f-1].suffix=!0),n.length==2&&n[0].prefix&&n[1].suffix&&(n[0].prefix=!1),n.length==3&&n[0].prefix&&n[1].suffix&&n[2].suff2){const m=[];for(var a=0;a<n.length;a++)m.push(n[a].single_cons);const v=m.join("");let _=Vt(v);_==null&&(s.push('Ambiguous syllable found: root consonant not known for "'+v+'".'),_=1),n[_].prefix=n[_].suffix=!1,n[_+1].suff2=!1}n[0].prefix&&Kt(n[0].single_cons+"+"+n[1].cons_str)&&(n[0].dot=!0);let r="";for(var a=0;a<n.length;a++)r+=Du(n[a]);const i=new xu;return i.wylie=r,i.tokens_used=d-o,i.warns=s,i}function $u(u,e,d){const o=d;let s=null,n=null,f=null;const a=new ku;let r=u.charAt(d++);for(a.top=et(r),a.stack.push(et(r));d<e;){r=u.charAt(d);var i;if((i=Wt(r))!=null)d++,a.stack.push(i),a.finals.length>0?a.warns.push('Subjoined sign "'+i+'" found after final sign "'+s+'".'):a.vowels.length>0&&a.warns.push('Subjoined sign "'+i+'" found after vowel sign "'+n+'".');else if((i=Ht(r))!=null)d++,a.vowels.push(i),n==null&&(n=i),a.finals.length>0&&a.warns.push('Vowel sign "'+i+'" found after final sign "'+s+'".');else if((i=Xt(r))!=null)d++,f=Fu(r),i=="^"?a.caret=!0:(i=="H"&&(a.visarga=!0),a.finals.push(i),s==null&&(s=i),a.finals_found.containsKey(f)?a.warns.push('Final sign "'+i+'" should not combine with found after final sign "'+s+'".'):a.finals_found.put(f,i));else break}if(a.top=="a"&&a.stack.length==1&&a.vowels.length>0&&a.stack.shift(),a.vowels.length>1&&a.vowels[0]=="A"&&It(a.vowels[1])!=null){var m=It(a.vowels[1]);a.vowels.shift(),a.vowels.shift(),a.vowels.unshift(m)}if(a.caret&&a.stack.length==1&&Qt(a.top)!=null){var m=Qt(a.top);a.top=m,a.stack.shift(),a.stack.unshift(m),a.caret=!1}return a.cons_str=a.stack.join("+"),a.stack.length==1&&a.stack[0]!="a"&&!a.caret&&a.vowels.length==0&&a.finals.length==0&&(a.single_cons=a.cons_str),a.tokens_used=d-o,a}function Du(u){let e="";return Kt(u.cons_str)?e+=u.stack.join(""):e+=u.cons_str,u.caret&&(e+="^"),u.vowels.length>0?e+=u.vowels.join("+"):!u.prefix&&!u.suffix&&!u.suff2&&(u.cons_str.length==0||u.cons_str.charAt(u.cons_str.length-1)!="a")&&(e+="a"),e+=u.finals.join(""),u.dot&&(e+="."),e}function Dt(u,e,d){d||(d=[]),e===void 0&&(e=!0);let o="",s=1;u=u.replace(/\u0f76/g,"ྲྀ"),u=u.replace(/\u0f77/g,"ྲཱྀ"),u=u.replace(/\u0f78/g,"ླྀ"),u=u.replace(/\u0f79/g,"ླཱྀ"),u=u.replace(/\u0f81/g,"ཱྀ");let n=0;const f=u.length;t:for(;n<f;){let a=u.charAt(n);if(et(a)!=null){const i=Nu(u,f,n);o+=i.wylie,n+=i.tokens_used;for(let m=0;m<i.warns.length;m++)at(d,s,i.warns[m]);e||(n+=$t(u,n,o));continue t}const r=bt(a);if(r!=null&&(a!=" "||e&&!Mu(u,n))){o+=r,n++,e||(n+=$t(u,n,o));continue t}if(a=="\r"||a==`
`){s++,n++,o+=a,a=="\r"&&n<f&&u.charAt(n)==`
`&&(n++,o+=`
`);continue t}if(a=="\uFEFF"||a=="​"){n++;continue t}if(!e){o+=a,n++;continue t}if(a>="ༀ"&&a<="࿿"){const i=Nt(a);o+=i,n++,(Wt(a)!=null||Ht(a)!=null||Xt(a)!=null)&&at(d,s,"Tibetan sign "+i+" needs a top symbol to attach to.");continue t}for(o+="[";et(a)==null&&(bt(a)==null||a==" ")&&a!="\r"&&a!=`
`&&(a=="["||a=="]"?(o+="\\",o+=a):a>="ༀ"&&a<="࿿"?o+=Nt(a):o+=a,!(++n>=f));)a=u.charAt(n);o+="]"}return o}const Pu={fromWylie:Mt,toUnicode:Mt,toWylie:Dt,fromUnicode:Dt},Eu={class:"q-pa-md",style:{"max-width":"600px",width:"100%"}},Ou={class:"row items-center q-pa-md"},Bu={class:"q-ml-md col"},Lu={class:"text-subtitle1 text-weight-medium"},Vu={class:"text-caption text-grey-7"},Wu={key:0,class:"q-mb-md q-px-sm"},Hu={class:"url-preview q-pa-sm"},Xu={class:"text-body2 text-grey-8"},Ku={class:"text-h6 q-mb-md text-positive"},Yu={class:"text-subtitle2 text-weight-medium q-mb-sm"},Gu={class:"text-subtitle2 text-weight-medium q-mb-sm"},Zu={__name:"CreateSessionPage",setup(u){const e=ou(),d=gu(),o=Z(""),s=Z(""),n=Z(!1),f=Z(null),a=Z(null),r=Z(null),i=Z(!1),m=nt(()=>o.value?Pu.toWylie(o.value).toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/--+/g,"-").replace(/^-+|-+$/g,""):""),v=nt(()=>a.value?`${window.location.origin}/#/creator/${a.value.id}?token=${a.value.creator_token}`:""),_=nt(()=>a.value?`${window.location.origin}/#/helper/${a.value.id}?token=${a.value.helper_token}`:""),g=nt(()=>m.value?`${window.location.origin}/#/creator/${m.value}`:"");lu(s,async j=>{r.value=null,!(!j||j.trim()===""||!/^(https?:\/\/)?(www\.)?(youtube\.com\/watch\?v=|youtu\.be\/)[\w-]+/.test(j))&&await T(j)});async function T(j){i.value=!0;try{const c=`https://www.youtube.com/oembed?url=${encodeURIComponent(j)}&format=json`,k=await fetch(c);if(!k.ok)throw new Error("Failed to fetch video metadata");const R=await k.json();r.value=R;const st=100;if(R.title&&!o.value){const ft=R.title.length>st?R.title.substring(0,st).trim():R.title;o.value=ft}}catch(c){console.error("Failed to fetch video metadata:",c)}finally{i.value=!1}}async function C(){n.value=!0,f.value=null;try{const j=o.value||null,c=m.value||null;a.value=await hu.createSession(s.value,j,c),d.notify({type:"positive",message:"Session created successfully!",icon:"check_circle"})}catch(j){f.value=j.response?.data?.error||j.message||"Failed to create session",d.notify({type:"negative",message:f.value,icon:"error"}),a.value=null}finally{n.value=!1}}async function F(j,c){try{await navigator.clipboard.writeText(j),d.notify({type:"positive",message:`${c} URL copied to clipboard!`,icon:"content_copy",timeout:1500})}catch{d.notify({type:"negative",message:"Failed to copy to clipboard",icon:"error"})}}function M(j){const c=new URL(j);e.push(c.hash.substring(1))}return(j,c)=>(X(),tt(pu,{class:"flex flex-center"},{default:A(()=>[N("div",Eu,[r.value||i.value?(X(),tt(rt,{key:0,class:"q-mb-md"},{default:A(()=>[N("div",Ou,[i.value?(X(),tt(Tt,{key:0,type:"rect",style:{width:"120px",height:"90px"},class:"rounded-borders"})):(X(),tt(ru,{key:1,src:r.value.thumbnail_url,style:{width:"120px",height:"90px"},class:"rounded-borders"},null,8,["src"])),N("div",Bu,[N("div",Lu,[i.value?(X(),tt(Tt,{key:0,type:"text"})):(X(),Ct(fu,{key:1},[E(yt(r.value.title),1)],64))]),N("div",Vu,[x(K,{name:"play_circle",size:"xs"}),c[5]||(c[5]=E(" YouTube Video ",-1))])])])]),_:1})):it("",!0),x(rt,null,{default:A(()=>[x(lt,null,{default:A(()=>[...c[6]||(c[6]=[N("div",{class:"text-h5"},"Create New Session",-1),N("div",{class:"text-subtitle2 text-grey-7"}," Paste a YouTube URL to create a new annotation session ",-1)])]),_:1}),x(lt,null,{default:A(()=>[x(wu,{onSubmit:C},{default:A(()=>[x(ct,{modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=k=>o.value=k),outlined:"",label:"Session Name (Optional)",placeholder:"My Tibetan Lesson",disable:n.value,rules:[k=>!k||k.length>=3||"Name must be at least 3 characters",k=>!k||k.length<=100||"Name must be less than 100 characters"],"lazy-rules":"",class:"q-mb-sm",hint:"Optional: Custom name for your URL. Leave blank for random ID."},{prepend:A(()=>[x(K,{name:"label"})]),_:1},8,["modelValue","disable","rules"]),m.value?(X(),Ct("div",Wu,[c[7]||(c[7]=N("div",{class:"text-caption text-grey-7 q-mb-xs"},"URL Preview:",-1)),N("div",Hu,[x(K,{name:"link",size:"xs",class:"q-mr-xs"}),N("span",Xu,yt(g.value),1)])])):it("",!0),x(ct,{modelValue:s.value,"onUpdate:modelValue":c[1]||(c[1]=k=>s.value=k),outlined:"",label:"YouTube URL",placeholder:"https://www.youtube.com/watch?v=...",type:"url",disable:n.value,rules:[k=>!!k||"YouTube URL is required"],"lazy-rules":""},{prepend:A(()=>[x(K,{name:"play_circle"})]),_:1},8,["modelValue","disable","rules"]),x(pt,{type:"submit",color:"primary",loading:n.value,disable:!s.value,class:"full-width q-mt-md",size:"lg"},{default:A(()=>[...c[8]||(c[8]=[E(" Create Session ",-1)])]),_:1},8,["loading","disable"])]),_:1}),f.value?(X(),tt(At,{key:0,class:"bg-negative text-white q-mt-md",rounded:""},{avatar:A(()=>[x(K,{name:"error"})]),default:A(()=>[E(" "+yt(f.value),1)]),_:1})):it("",!0)]),_:1}),a.value?(X(),tt(lt,{key:0},{default:A(()=>[x(iu,{class:"q-mb-md"}),N("div",Ku,[x(K,{name:"check_circle"}),c[9]||(c[9]=E(" Session Created Successfully! ",-1))]),c[15]||(c[15]=N("p",{class:"text-body2 q-mb-md"},"Share these URLs:",-1)),x(rt,{flat:"",bordered:"",class:"q-mb-md"},{default:A(()=>[x(lt,null,{default:A(()=>[N("div",Yu,[x(K,{name:"manage_accounts",color:"primary"}),c[10]||(c[10]=E(" Your URL (Creator - Full Access) ",-1))]),x(ct,{"model-value":v.value,outlined:"",readonly:"",dense:"",class:"q-mb-sm"},{append:A(()=>[x(pt,{flat:"",dense:"",icon:"content_copy",onClick:c[2]||(c[2]=k=>F(v.value,"Creator"))},{default:A(()=>[x(qt,null,{default:A(()=>[...c[11]||(c[11]=[E("Copy to clipboard",-1)])]),_:1})]),_:1})]),_:1},8,["model-value"]),x(pt,{color:"primary",icon:"open_in_new",label:"Open Session",onClick:c[3]||(c[3]=k=>M(v.value)),class:"full-width"})]),_:1})]),_:1}),x(rt,{flat:"",bordered:""},{default:A(()=>[x(lt,null,{default:A(()=>[N("div",Gu,[x(K,{name:"help",color:"secondary"}),c[12]||(c[12]=E(" Helper URL (Can Reply Only) ",-1))]),x(ct,{"model-value":_.value,outlined:"",readonly:"",dense:""},{append:A(()=>[x(pt,{flat:"",dense:"",icon:"content_copy",onClick:c[4]||(c[4]=k=>F(_.value,"Helper"))},{default:A(()=>[x(qt,null,{default:A(()=>[...c[13]||(c[13]=[E("Copy to clipboard",-1)])]),_:1})]),_:1})]),_:1},8,["model-value"])]),_:1})]),_:1}),x(At,{class:"q-mt-md",dense:""},{avatar:A(()=>[x(K,{name:"info",color:"info"})]),default:A(()=>[c[14]||(c[14]=E(" Click any URL to copy to clipboard ",-1))]),_:1})]),_:1})):it("",!0)]),_:1})])]),_:1}))}},ae=cu(Zu,[["__scopeId","data-v-de9b9197"]]);export{ae as default};
