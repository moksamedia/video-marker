import{n as ye,O as De,c as C,P as $e,x as A,Q as S,R as Oe,S as Me,T as Ve,U as Ee,V as Fe,p as Le,W as Ae,v as He,r as $,q as Ie,X as Ke,Y as Re,Z as ze,_ as Ne,$ as We,J as W,a0 as je,a1 as oe,a2 as Ue,a3 as Ye,a4 as Ge,a5 as Je,a6 as Xe,a7 as Ze,y as et,a8 as tt,a9 as ot,G as at,D as nt,aa as lt,ab as rt,ac as st,ad as it,B as ut,a as b,o as v,w as o,K as ct,g as x,h as V,d as t,e as y,t as Q,j as B,L as ae,F as ne,k as le,M as dt,i as re,ae as ft,af as E,ag as L}from"./index-CdXKqIwE.js";import{Q as mt,a as se,b as vt}from"./QSpace-CikJXZ9p.js";import{Q as gt}from"./QSpinnerDots-CS0bZHc0.js";import{_ as yt,b as ie,Q as pt,a as kt}from"./_plugin-vue_export-helper-BlM1Smyy.js";import{Q as ue}from"./QImg-CWgofFTW.js";import{Q as z,a as D,b as k,c as ce}from"./QList-Blu0AZWi.js";import{v as _t,a as de,b as ht,c as Ct,d as bt,p as fe,e as xt,r as me,s as St,u as wt,Q as N}from"./use-quasar-BVv1AXdb.js";import"./axios-CpKrHKbl.js";const Bt=ye({name:"QBtnToggle",props:{...De,modelValue:{required:!0},options:{type:Array,required:!0,validator:e=>e.every(u=>("label"in u||"icon"in u||"slot"in u)&&"value"in u)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(e,{slots:u,emit:i}){const g=C(()=>e.options.find(c=>c.value===e.modelValue)!==void 0),f=C(()=>({type:"hidden",name:e.name,value:e.modelValue})),h=Oe(f),p=C(()=>$e(e)),T=C(()=>({rounded:e.rounded,dense:e.dense,...p.value})),w=C(()=>e.options.map((c,m)=>{const{attrs:l,value:a,slot:r,...s}=c;return{slot:r,props:{key:m,"aria-pressed":a===e.modelValue?"true":"false",...l,...s,...T.value,disable:e.disable===!0||s.disable===!0,color:a===e.modelValue?d(s,"toggleColor"):d(s,"color"),textColor:a===e.modelValue?d(s,"toggleTextColor"):d(s,"textColor"),noCaps:d(s,"noCaps")===!0,noWrap:d(s,"noWrap")===!0,size:d(s,"size"),padding:d(s,"padding"),ripple:d(s,"ripple"),stack:d(s,"stack")===!0,stretch:d(s,"stretch")===!0,onClick(P){q(a,c,P)}}}}));function q(c,m,l){e.readonly!==!0&&(e.modelValue===c?e.clearable===!0&&(i("update:modelValue",null,null),i("clear")):i("update:modelValue",c,m),i("click",l))}function d(c,m){return c[m]===void 0?e[m]:c[m]}function _(){const c=w.value.map(m=>A(S,m.props,m.slot!==void 0?u[m.slot]:void 0));return e.name!==void 0&&e.disable!==!0&&g.value===!0&&h(c,"push"),Me(u.default,c)}return()=>A(mt,{class:"q-btn-toggle",...p.value,rounded:e.rounded,stretch:e.stretch,glossy:e.glossy,spread:e.spread},_)}}),ve=ye({name:"QMenu",inheritAttrs:!1,props:{...ht,...Ae,...Le,...Fe,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:de},self:{type:String,validator:de},offset:{type:Array,validator:_t},scrollTarget:Ee,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Ve,"click","escapeKey"],setup(e,{slots:u,emit:i,attrs:g}){let f=null,h,p,T;const w=He(),{proxy:q}=w,{$q:d}=q,_=$(null),c=$(!1),m=C(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),l=Ie(e,d),{registerTick:a,removeTick:r}=Ke(),{registerTimeout:s}=Re(),{transitionProps:P,transitionStyle:pe}=ze(e),{localScrollTarget:j,changeScrollEvent:ke,unconfigureScrollTarget:_e}=Ct(e,ee),{anchorEl:O,canShow:he}=bt({showing:c}),{hide:U}=Ne({showing:c,canShow:he,handleShow:we,handleHide:Be,hideOnRouteChange:m,processOnMount:!0}),{showPortal:Y,hidePortal:G,renderPortal:Ce}=We(w,_,qe,"menu"),H={anchorEl:O,innerRef:_,onClickOutside(n){if(e.persistent!==!0&&c.value===!0)return U(n),(n.type==="touchstart"||n.target.classList.contains("q-dialog__backdrop"))&&nt(n),!0}},J=C(()=>fe(e.anchor||(e.cover===!0?"center middle":"bottom start"),d.lang.rtl)),be=C(()=>e.cover===!0?J.value:fe(e.self||"top start",d.lang.rtl)),xe=C(()=>(e.square===!0?" q-menu--square":"")+(l.value===!0?" q-menu--dark q-dark":"")),Se=C(()=>e.autoClose===!0?{onClick:Te}:{}),X=C(()=>c.value===!0&&e.persistent!==!0);W(X,n=>{n===!0?(je(K),xt(H)):(oe(K),me(H))});function I(){at(()=>{let n=_.value;n&&n.contains(document.activeElement)!==!0&&(n=n.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||n.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||n.querySelector("[autofocus], [data-autofocus]")||n,n.focus({preventScroll:!0}))})}function we(n){if(f=e.noRefocus===!1?document.activeElement:null,Ue(te),Y(),ee(),h=void 0,n!==void 0&&(e.touchPosition||e.contextMenu)){const R=Ye(n);if(R.left!==void 0){const{top:Pe,left:Qe}=O.value.getBoundingClientRect();h={left:R.left-Qe,top:R.top-Pe}}}p===void 0&&(p=W(()=>d.screen.width+"|"+d.screen.height+"|"+e.self+"|"+e.anchor+"|"+d.lang.rtl,M)),e.noFocus!==!0&&document.activeElement.blur(),a(()=>{M(),e.noFocus!==!0&&I()}),s(()=>{d.platform.is.ios===!0&&(T=e.autoClose,_.value.click()),M(),Y(!0),i("show",n)},e.transitionDuration)}function Be(n){r(),G(),Z(!0),f!==null&&(n===void 0||n.qClickOutside!==!0)&&(((n?.type.indexOf("key")===0?f.closest('[tabindex]:not([tabindex^="-"])'):void 0)||f).focus(),f=null),s(()=>{G(!0),i("hide",n)},e.transitionDuration)}function Z(n){h=void 0,p!==void 0&&(p(),p=void 0),(n===!0||c.value===!0)&&(Ge(te),_e(),me(H),oe(K)),n!==!0&&(f=null)}function ee(){(O.value!==null||e.scrollTarget!==void 0)&&(j.value=Je(O.value,e.scrollTarget),ke(j.value,M))}function Te(n){T!==!0?(Xe(q,n),i("click",n)):T=!1}function te(n){X.value===!0&&e.noFocus!==!0&&Ze(_.value,n.target)!==!0&&I()}function K(n){e.noEscDismiss!==!0&&(i("escapeKey"),U(n))}function M(){St({targetEl:_.value,offset:e.offset,anchorEl:O.value,anchorOrigin:J.value,selfOrigin:be.value,absoluteOffset:h,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function qe(){return A(tt,P.value,()=>c.value===!0?A("div",{role:"menu",...g,ref:_,tabindex:-1,class:["q-menu q-position-engine scroll"+xe.value,g.class],style:[g.style,pe.value],...Se.value},et(u.default)):null)}return ot(Z),Object.assign(q,{focus:I,updatePosition:M}),Ce}});function ge(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const u=parseInt(e,10);return isNaN(u)?0:u}const F=lt({name:"close-popup",beforeMount(e,{value:u}){const i={depth:ge(u),handler(g){i.depth!==0&&setTimeout(()=>{const f=st(e);f!==void 0&&it(f,g,i.depth)})},handlerKey(g){rt(g,13)===!0&&i.handler(g)}};e.__qclosepopup=i,e.addEventListener("click",i.handler),e.addEventListener("keyup",i.handlerKey)},updated(e,{value:u,oldValue:i}){u!==i&&(e.__qclosepopup.depth=ge(u))},beforeUnmount(e){const u=e.__qclosepopup;e.removeEventListener("click",u.handler),e.removeEventListener("keyup",u.handlerKey),delete e.__qclosepopup}}),Tt={class:"sessions-container"},qt={class:"row items-center q-mb-md"},Pt={key:0,class:"row justify-center q-pa-xl"},Qt={key:3,class:"row q-col-gutter-md"},Dt={class:"absolute-bottom text-subtitle2 text-center"},$t={class:"row items-center q-gutter-xs q-mb-sm"},Ot={class:"row q-gutter-xs"},Mt={__name:"SessionsPage",setup(e){const u=ct(),i=wt(),g=$(!0),f=$(null),h=$([]),p=$(localStorage.getItem("sessionsViewMode")||"grid");W(p,l=>{localStorage.setItem("sessionsViewMode",l)}),ut(()=>{T()});async function T(){g.value=!0,f.value=null;try{const l=await ie.listSessions();h.value=l.sessions||[]}catch(l){f.value=l.response?.data?.error||l.message||"Failed to load sessions"}finally{g.value=!1}}function w(l){u.push(`/creator/${l.id}?token=${l.creator_token}`)}function q(l){u.push(`/helper/${l.id}?token=${l.helper_token}`)}function d(l){const a=`${window.location.origin}/#/creator/${l.id}?token=${l.creator_token}`;navigator.clipboard.writeText(a),i.notify({type:"positive",message:"Creator link copied to clipboard!",icon:"content_copy",timeout:1500})}function _(l){const a=`${window.location.origin}/#/helper/${l.id}?token=${l.helper_token}`;navigator.clipboard.writeText(a),i.notify({type:"positive",message:"Helper link copied to clipboard!",icon:"content_copy",timeout:1500})}function c(l){i.dialog({title:"Delete Session",message:`Are you sure you want to delete "${l.youtube_title}"? This will delete all markers and posts.`,cancel:!0,persistent:!0}).onOk(async()=>{try{await ie.deleteSession(l.id,l.creator_token),i.notify({type:"positive",message:"Session deleted successfully",icon:"delete"}),T()}catch(a){i.notify({type:"negative",message:a.response?.data?.error||"Failed to delete session",icon:"error"})}})}function m(l){const a=new Date(l),s=new Date-a,P=Math.floor(s/(1e3*60*60*24));return P===0?"Today":P===1?"Yesterday":P<7?`${P} days ago`:a.toLocaleDateString()}return(l,a)=>(v(),b(pt,{class:"q-pa-md"},{default:o(()=>[x("div",Tt,[x("div",qt,[a[2]||(a[2]=x("div",{class:"col"},[x("div",{class:"text-h5"},"My Sessions"),x("div",{class:"text-caption text-grey-7"},"Manage all your annotation sessions")],-1)),t(Bt,{modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=r=>p.value=r),"toggle-color":"primary",options:[{icon:"view_module",value:"grid"},{icon:"view_list",value:"list"}],class:"q-mr-md"},null,8,["modelValue"]),t(S,{color:"primary",icon:"add",label:"Create New",to:"/"})]),g.value?(v(),V("div",Pt,[t(gt,{color:"primary",size:"50px"})])):f.value?(v(),b(kt,{key:1,class:"bg-negative text-white",rounded:""},{avatar:o(()=>[t(B,{name:"error"})]),default:o(()=>[y(" "+Q(f.value),1)]),_:1})):h.value.length===0?(v(),b(ae,{key:2,class:"text-center q-pa-xl"},{default:o(()=>[t(B,{name:"video_library",size:"64px",color:"grey-5"}),a[3]||(a[3]=x("div",{class:"text-h6 q-mt-md text-grey-7"},"No Sessions Yet",-1)),a[4]||(a[4]=x("div",{class:"text-body2 text-grey-6 q-mb-md"}," Create your first annotation session to get started ",-1)),t(S,{color:"primary",icon:"add",label:"Create Session",to:"/"})]),_:1})):p.value==="grid"?(v(),V("div",Qt,[(v(!0),V(ne,null,le(h.value,r=>(v(),V("div",{key:r.id,class:"col-12 col-sm-6 col-md-4"},[t(ae,null,{default:o(()=>[t(ue,{src:r.youtube_thumbnail,ratio:16/9,class:"cursor-pointer",onClick:s=>w(r)},{default:o(()=>[x("div",Dt,Q(r.youtube_title),1)]),_:2},1032,["src","onClick"]),t(dt,null,{default:o(()=>[x("div",$t,[t(se,{dense:"",color:"primary","text-color":"white",icon:"schedule"},{default:o(()=>[y(Q(r.marker_count)+" marker(s) ",1)]),_:2},1024),t(se,{dense:"",color:"grey-7","text-color":"white",icon:"calendar_today"},{default:o(()=>[y(Q(m(r.created_at)),1)]),_:2},1024)])]),_:2},1024),t(re),t(ft,{align:"center"},{default:o(()=>[t(S,{flat:"",color:"primary",icon:"manage_accounts",label:"Creator",onClick:s=>w(r)},null,8,["onClick"]),t(S,{flat:"",color:"secondary",icon:"help",label:"Helper",onClick:s=>q(r)},null,8,["onClick"]),t(vt),t(S,{flat:"",round:"",dense:"",icon:"more_vert"},{default:o(()=>[t(ve,null,{default:o(()=>[t(z,{style:{"min-width":"150px"}},{default:o(()=>[E((v(),b(D,{clickable:"",onClick:s=>d(r)},{default:o(()=>[t(k,{avatar:""},{default:o(()=>[t(B,{name:"content_copy",color:"primary"})]),_:1}),t(k,null,{default:o(()=>[...a[5]||(a[5]=[y("Copy Creator Link",-1)])]),_:1})]),_:1},8,["onClick"])),[[F]]),E((v(),b(D,{clickable:"",onClick:s=>_(r)},{default:o(()=>[t(k,{avatar:""},{default:o(()=>[t(B,{name:"content_copy",color:"secondary"})]),_:1}),t(k,null,{default:o(()=>[...a[6]||(a[6]=[y("Copy Helper Link",-1)])]),_:1})]),_:1},8,["onClick"])),[[F]]),t(re),E((v(),b(D,{clickable:"",onClick:s=>c(r)},{default:o(()=>[t(k,{avatar:""},{default:o(()=>[t(B,{name:"delete",color:"negative"})]),_:1}),t(k,null,{default:o(()=>[...a[7]||(a[7]=[y("Delete Session",-1)])]),_:1})]),_:1},8,["onClick"])),[[F]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128))])):(v(),b(z,{key:4,bordered:"",separator:"",class:"rounded-borders"},{default:o(()=>[(v(!0),V(ne,null,le(h.value,r=>(v(),b(D,{key:r.id,clickable:"",onClick:s=>w(r),class:"session-list-item"},{default:o(()=>[t(k,{avatar:"",class:"session-thumbnail"},{default:o(()=>[t(ue,{src:r.youtube_thumbnail,style:{width:"120px",height:"68px"},class:"rounded-borders"},null,8,["src"])]),_:2},1024),t(k,{class:"session-info"},{default:o(()=>[t(ce,{class:"text-weight-medium"},{default:o(()=>[y(Q(r.youtube_title),1)]),_:2},1024),t(ce,{caption:""},{default:o(()=>[t(B,{name:"schedule",size:"xs"}),y(" "+Q(r.marker_count)+" marker(s) â€¢ ",1),t(B,{name:"calendar_today",size:"xs"}),y(" "+Q(m(r.created_at)),1)]),_:2},1024)]),_:2},1024),t(k,{side:"",class:"session-actions"},{default:o(()=>[x("div",Ot,[t(S,{flat:"",dense:"",round:"",color:"primary",icon:"manage_accounts",onClick:L(s=>w(r),["stop"])},{default:o(()=>[t(N,null,{default:o(()=>[...a[8]||(a[8]=[y("Open as Creator",-1)])]),_:1})]),_:1},8,["onClick"]),t(S,{flat:"",dense:"",round:"",color:"secondary",icon:"help",onClick:L(s=>q(r),["stop"])},{default:o(()=>[t(N,null,{default:o(()=>[...a[9]||(a[9]=[y("Open as Helper",-1)])]),_:1})]),_:1},8,["onClick"]),t(S,{flat:"",dense:"",round:"",color:"negative",icon:"delete",onClick:L(s=>c(r),["stop"])},{default:o(()=>[t(N,null,{default:o(()=>[...a[10]||(a[10]=[y("Delete Session",-1)])]),_:1})]),_:1},8,["onClick"]),t(S,{flat:"",dense:"",round:"",icon:"more_vert",onClick:a[1]||(a[1]=L(()=>{},["stop"]))},{default:o(()=>[t(ve,null,{default:o(()=>[t(z,{style:{"min-width":"150px"}},{default:o(()=>[E((v(),b(D,{clickable:"",onClick:s=>d(r)},{default:o(()=>[t(k,{avatar:""},{default:o(()=>[t(B,{name:"content_copy",color:"primary"})]),_:1}),t(k,null,{default:o(()=>[...a[11]||(a[11]=[y("Copy Creator Link",-1)])]),_:1})]),_:1},8,["onClick"])),[[F]]),E((v(),b(D,{clickable:"",onClick:s=>_(r)},{default:o(()=>[t(k,{avatar:""},{default:o(()=>[t(B,{name:"content_copy",color:"secondary"})]),_:1}),t(k,null,{default:o(()=>[...a[12]||(a[12]=[y("Copy Helper Link",-1)])]),_:1})]),_:1},8,["onClick"])),[[F]])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1}))])]),_:1}))}},Rt=yt(Mt,[["__scopeId","data-v-1257a48e"]]);export{Rt as default};
